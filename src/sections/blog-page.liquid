{% schema %}
  {
    "name": "Blog Page",
    "settings": [
      {
        "type": "header",
        "content": "Background Images"
      },
      {
        "type": "image_picker",
        "id": "bg_image",
        "label": "Background Image"
      },
      {
        "type": "image_picker",
        "id": "bg_image_mobile",
        "label": "Background Image - Mobile"
      },
      {
        "type": "header",
        "content": "Header Text"
      },
      {
        "type": "text",
        "id": "header_text",
        "label": "Header Text"
      },
      {
        "type": "color",
        "id": "header_text_color",
        "label": "Header Text Color"
      },
      {
        "type": "text",
        "id": "subheader_text",
        "label": "Subheader Text"
      },
      {
        "type": "color",
        "id": "subheader_text_color",
        "label": "Subheader Text Color"
      },
      {
        "type": "color",
        "id": "tags_text_color",
        "label": "Categories Text Color"
      }
    ]
  }
{% endschema %}


{% paginate blog.articles by 6 %}

  {%- assign blog_title = blog.title -%}

  {% if current_tags %}
    {% capture blog_title %}
      {{ blog.title | link_to: blog.url }} &mdash; {{ current_tags.first }}
    {% endcapture %}
  {% endif %}
  <!-- BANNER -->
  <div class="bg__wrapper bg--cover height--100 width--100" data-bg="{{ section.settings.bg_image | img_url: '2880x' }}" data-bg-mobile="{{ section.settings.bg_image_mobile | img_url: '990x' }}">
    <div class="aspect-ratio--16x9 header">
      <div class="row align-center height--100">
        <div class="col-12">
          <div class="row no-pad">
            <div class="col-10 offset-1">
              <h1 style="color: {{ section.settings.header_text_color }}">
                {{ section.settings.header_text }}
              </h1>
              <h2 style="color: {{ section.settings.subheader_text_color }}">
                {{ section.settings.subheader_text }}
              </h2>

              {% if blog.all_tags.size > 0 %}
                <h3 style="color: {{ section.settings.tags_text_color }}">
                  Categories:
                </h3>
                {% for tag in blog.all_tags %}
                    <a style="color: {{ section.settings.tags_text_color }}" href="{{ blog.url }}/tagged/{{ tag | handle }}">
                      {{ tag }}
                    </a>{% unless forloop.last %}, {% endunless %}
                {% endfor %}
              </div>
            </div>  
          </div>  
        </div>  
      </div>
    </div>
  </div>    



  {% endif %}


  {% comment %}

  Article Previews
  ====================
  {% endcomment %}

  <div class="container--lg">
    <div class="row no-pad">
      {% for article in blog.articles %}
        <div class="col-12 col-6-md">
          <a class="margin-top--lg display--block" href="{{ article.url }}">
            <div class="margin-bottom--sm">
              <h2>
                {{ article.title }}
              </h2>
            </div>  
            {% capture date %}
              {{ article.created_at | date: "%a, %b %d, %Y" }}
            {% endcapture %}
            <div class="margin-bottom--md">
              <p>
                {{ article.author }}, {{ date }}
              </p>
            </div>  
            {% if article.image %}
              <a href="{{ article.url }}">
                <img class="width--100" src="{{ article.image.src | img_url: '800x' }}" alt="{{article.title}}">
              </a>
            {% endif %}
            <div class="margin-top--md">
              {% if article.excerpt.size > 0 %}
                <p>
                  {{ article.excerpt }}
                </p>
              {% else %}
                <p>
                  {{ article.content | strip_html | truncatewords: 100 }}
                </p>
              {% endif %}
              <div class="margin-top--sm">
                <a href="{{ article.url }}">
                  Read more &rarr;
                </a>
              </div>
            </div>
          </a>
        </div>        
      {% endfor%}
    </div>  
  </div>

  {% if paginate.pages > 1 %}
    {% include 'pagination' %}
  {% endif %}

{% endpaginate %}


{% include 'bg-set' %}
