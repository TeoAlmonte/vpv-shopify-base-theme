<!-- To set BG images responsively for a given element, use the class 'bg__wrapper' to identify the element along with 'data-bg' and 'data-bg-mobile' attributes to set the images sources. Remeber to include this snippet. -->

<script type='text/javascript'>

	function debounce(func, wait = 300) {
	  let timeout;
	  return function(...args) {
	    clearTimeout(timeout);
	    timeout = setTimeout(() => {
	      func.apply(this, args);
	    }, wait);
	  };
	}

	const setBgImage = function(bgWrapper,desktopImg,mobileImg ){
		if (window.innerWidth > 992) {
			bgWrapper.style.backgroundImage = "url('"+desktopImg.trim()+"')";
		} else {
			bgWrapper.style.backgroundImage = "url('"+mobileImg.trim()+"')";
		}
	}

	document.addEventListener('DOMContentLoaded', () => {
		console.log('BG Set scripts loaded');
		const bgWrappers = document.getElementsByClassName('bg__wrapper');
		if (bgWrappers.length >= 1) {
			for ( bgWrapper of bgWrappers ) {
				const desktopImg = bgWrapper.getAttribute('data-bg'); 
				const mobileImg = bgWrapper.getAttribute('data-bg-mobile');
				setBgImage(bgWrapper,desktopImg,mobileImg);
				window.addEventListener('resize', debounce(function(){
					setBgImage(bgWrapper,desktopImg,mobileImg);
				}),300);
			}
		}
	})
</script>	